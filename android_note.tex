% 시스템 서비스의 마진도 조정해야 한다.(책에서는)
%\documentclass[a4paper,hidelinks,10pt]{book}
\documentclass[a4paper,hidelinks,10pt,openany]{book} % pdf 전용
\usepackage{kotex} %[hangul]을 추가하면 제 1장, 제 1절 식으로 들어감
\usepackage{graphicx}
\usepackage{upquote}
\usepackage{listings}
\usepackage{color}
\usepackage{verbatim} 
\usepackage{hyperref}
\usepackage[top=1in, bottom=1in, outer=2.5cm, inner=2.5cm, headsep=14pt]{geometry} %pdf 전용
%\usepackage[top=1in, bottom=1in, outer=2cm, inner=3cm, headsep=14pt]{geometry}
\usepackage[T1]{fontenc}
\usepackage{textcomp}
\usepackage{fancyhdr}
\usepackage{dhucs-cmap} %pdf에서 한글 복사가 되는 옵션
\usepackage{makecell} %표에서 한 셀에서 linebreak
\usepackage{longtable} %여러 페이지에 걸쳐있는 테이블
\usepackage{fontspec}
%\setmainfont{나눔고딕} % 이걸 쓰면 섹션 타이틀이 bold와 아닌 것이 섞인다.
%\setmainfont{Times New Roman} % Roman (rm)
%\setsansfont{Arial}           % Sans-serif (sf)
\setmonofont{Courier New}         % Monospace (tt)

\pagestyle{fancy} %상단에 페이지와 현재 절 표현하기

\makeatletter
\DeclareRobustCommand{\format@sec@number}[2]{{\normalfont\upshape#1}#2}
\renewcommand{\chaptermark}[1]{%
  \markboth{\format@sec@number{\ifnum\c@secnumdepth>\m@ne\@chapapp\ \thechapter. \fi}{#1}}{}}
\renewcommand{\sectionmark}[1]{%
  \markright{\format@sec@number{\ifnum\c@secnumdepth>\z@\thesection \fi}{ #1}}}
\makeatother

\fancyhf{}
\fancyhead[RE]{\nouppercase{\leftmark}}
\fancyhead[LO]{\nouppercase{\rightmark}}
\fancyhead[LE,RO]{\thepage}

%\usepackage[scale=0.75,twoside,bindingoffset=5mm,a4paper]{geometry}

\renewcommand{\baselinestretch}{1.3} 
\renewcommand\theadalign{cb}
\renewcommand\theadfont{\bfseries}
\renewcommand\theadgape{\Gape[4pt]}
\renewcommand\cellgape{\Gape[4pt]}

\def\contentsname{차례}
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.3,0.3,0.3}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
\definecolor{purple}{rgb}{0.5, 0.0, 0.5}
\definecolor{burntorange}{rgb}{0.8, 0.33, 0.0}
\definecolor{tearose}{rgb}{1.0, 0.92, 0.8}

\renewcommand\lstlistingname{코드}

\title{안드로이드 기본 정석}
\author{노재춘}

\begin{document}
% 한글 맞춤법 https://search.naver.com/search.naver?where=nexearch&query=%ED%95%9C%EA%B8%80+%EB%A7%9E%EC%B6%A4%EB%B2%95+%EA%B2%80%EC%82%AC%EA%B8%B0&sm=top_sug.pre&fbm=0&acr=1&acq=%ED%95%9C%EA%B8%80+%EB%A7%9E%EC%B6%A4%EB%B2%95&qdt=0&ie=utf8

%https://en.wikibooks.org/wiki/LaTeX/Labels_and_Cross-referencing
% http://latexcolor.com
\maketitle
\begin{comment}
\chapter*{머릿말}
로그 내용은 다를 수 있다..
능력을 인정받는 개발자도 아니고, 화려한 기술을 가지지도 않았다.
나도 책과 인터넷에서 많은 도움을 받았다. 
오래 전 팀 동료가 그런 얘기를 했다. ``국내 IT서적은 다 쓰레기다'' 그 동료는 책 꽂이에 원서만 나열해놓고 있었다.
어쩌면 쓰레기 하나를 더 만들었는지도 모르겠다.

좌충우돌한 이야기

내용 검토를 해준 이효근님, 윤신주님, 김태중님, 김성수님, 원형식님, 송지철님, 이정민님, 이종권님에게 감사드린다. 이 분들 덕분에 내용에서 많은 문제들이 수정될 수 있었다.
오랜 시간을 기다려준 아내에게도 감사한다. 죄와벌 이나 태백산맥 같은 역작을 내는 것도 아닌데, 무슨 시간이 이리 많이 걸리는지..

많은 격려를 해준 강용석님에게도 감사..
\end{comment}

\tableofcontents

\parindent=0em

%\newfontfamily\listingsfont[Scale=0.7]{Courier} 
%\newfontfamily\listingsfontinline[Scale=0.8]{Courier New} 

\lstset {
	language=java, 
	basicstyle=\ttfamily\small,
	%basicstyle=\fontfamily{mono}\selectfont\small,
	backgroundcolor=\color{backcolour},   
	commentstyle=\color{codegreen},
    keywordstyle=\color{purple},
	tabsize=4,
	showspaces=false, 
	showstringspaces=false, 
	numberstyle=\color{codegray},
	numbers=left,                    
    numbersep=5pt,  
    stepnumber=5,      
    firstnumber=1,
	breaklines=tr}
\newpage

\begin{comment}
\begin{abstract}
잘 만든 앱은 다 그럭저럭이지만, 그렇지 않은 앱은 제각각의 이유가 있다. 여기서는 그럭저럭한 앱을 만드는 원리와 방법을 찾아보고, 문제를 발생시키는 제각각의 이유에 대해서도 얘기해보자.
\end{abstract}
\end{comment}

\chapter*{이 책의 구성}
안드로이드 컴포넌트에 대한 기본 내용을 중심으로 서술하였다. 각 내용은 근거를 제시하기 위해서 프레임워크 소스나 샘플 소스를 가지고 설명한다.
여러 장에서 반복되는 내용도 있기 때문에 당장 이해가 안 되는 부분이 있더라도 끝까지 읽도록 하자.\\

1장에서는 프레임워크 스택의 기본 내용과 함께 프레임워크 소스를 참고하고 활용하는 방법에 대해 얘기한다.\\

2장에서는 안드로이드 컴포넌트가 실행되는 메인 스레드의 동작 방식을 설명한다.
Handler, Looper, Message, MessageQueue의 관계를 이해하고 나면, 안드로이드 컴포넌트의 여러 실행 문제를 해결할 수 있다. 
개발하면서 골칫거리 가운데 하나인 ANR에 대해서도 원인과 결과, 그리고 해결 방식에 대해서 다룬다.\\

3장에서는 2장의 Handler와 내용이 연결되는 HandlerThread와 스레드 풀, AsyncTask에 대한 기본 내용을 다룬다.\\

4장에서는 Activity, Service, Application의 상위 클래스이면서, 안드로이드 컴포넌트를 실행하거나 리소스를 참조할 때 필요한 Context 클래스에 대해서 살펴본다.\\

5장부터 9장까지는 Activity, Service, ContentProvider, BroadcastReceiver, Application까지 안드로이드 컴포넌트를 이슈 중심으로 설명한다.\\

10장에서 시스템 서비스에 관해서 목록을 정리하고, Service 컴포넌트와 차이점을 얘기한다. 시스템의 상태를 알기 위해 dumpsys 명령어를 활용하는 방법과 시스템 서비스의 여러 이슈에 대해서도 살펴본다.\\

11장에서는 앱 개발에서 사용하는 구현 패턴을 얘기한다. 싱글톤과 마커 인터페이스, Fragment 정적 생성 항목을 언급한다.\\

프레임워크 소스와 샘플은 킷캣을 기준으로 설명하고 테스트한 내용이 많다. 다른 버전에서는 프레임워크 소스 내용이나 샘플 동작이 다른 부분이 있을 수 있다. 달라지는 부분이 꼭 언급이 필요한 것이라면 이메일로 알려주기 바란다.(suribada@gmail.com)

\addcontentsline{toc}{chapter}{이 책의 구성}
\input{start}

\input{singlethread}

\input{context}

\input{activity}
\input{activity2}
%\input{activity2-1}\right 
%\input{activity3}
%\section{안드로이드 SDK 도구}

%%\input{tools}
%%\input{intent}

\input{service}
\input{service2}
\input{contentprovider}
\input{brodcastreceiver}
\input{application}
\input{binder}
\input{pattern}
\ 
%\input{deepsleep}

%\input{activitymanager}
%\input{toast}

% https://www.bookmake.co.kr/print/product.html?goods_cd=10000153#

\bibliography{book}
\bibliographystyle{plain}


\end{document}
